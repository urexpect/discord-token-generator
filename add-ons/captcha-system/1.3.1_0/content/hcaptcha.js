(()=>{let t=!1;async function e(){t=!0;let i=0,l=0,e=[],o=[],a=[],c=!1,s=null,u=null;const d=".button-submit",m=".task-image .border",f=".task-image .image",h=".task-image",U=".prompt-text",j=".no-selection",n="aria-checked",M="aria-hidden",y="Please click each image containing a ",w="Please click each image containing an ",g="airplane",b="bicycle",k="boat",_="bus",p="car",v="motorbus",A="motorcycle",S="seaplane",q="speedboat",I="surfboard",C="train",x="trimaran",L="truck",$="valley",F="vertical river",P=[g,b,k,_,p,v,A,S,q,I,C,x,L],E=10;let D=0;const T={speedboat:.14,fireboat:.4,boathouse:.4,submarine:.5,printer:.05,stretcher:.05,rotisserie:.02,spatula:.05};if(window.location.href.includes("checkbox")){console.log("solve");const r=setInterval(function(){const e=document.querySelector("#checkbox");var t;if(e)return"true"==e.getAttribute(n)?clearInterval(r):void(null===(t=e).offsetParent||"none"==t.style.display||t.disabled||"false"!=e.getAttribute(n)||(e.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),e.click()))},500)}else O();function J(o){return new Promise(async function(t,e){const n=await(s=s||await _cs.load({modelUrl:`chrome-extension://${chrome.runtime.id}/model_cs/model.json`})),r=new Image;r.onload=async function(){var e=await n.detect(r,maxNumBoxes=10,minScore=.25);r.removeAttribute("src"),t(e)},r.crossOrigin="Anonymous",r.src=o})}function R(o){return new Promise(async function(t,e){const n=await(u=u||await _mn.load({modelUrl:`chrome-extension://${chrome.runtime.id}/model_mn/model.json`})),r=new Image;r.onload=async function(){var e=await n.classify(r);r.removeAttribute("src"),t(e)},r.crossOrigin="Anonymous",r.src=o})}function B(e,t){const n=document.createEvent("HTMLEvents");n.initEvent(t,!1,!0),e.dispatchEvent(n)}function N(e){setTimeout(O,200*e)}function z(e){e=e.match(/(?<=\(\").+?(?=\"\))/g);return e?e[0]:0}function H(){const t=Date.now()/1e3,o=setInterval(function(){if(60<=Date.now()/1e3-t)return clearInterval(o);if(9==document.querySelectorAll(f).length)return clearInterval(o),O();{const n=["3 or more items of furniture","Equipped space or room","Photo is clean, no watermarks, logos or text overlays","An interior photo of room","Unsure","Photo is sharp"];for(let t=0;t<n.length;t++)if(Array.from(document.querySelectorAll("div")).find(e=>e.textContent===n[t])){clearInterval(o),n,t;var e=Array.from(document.querySelectorAll("div")).find(e=>e.textContent===$target_text);if(e){B(e,"mousedown"),B(e,"mouseup");const r=document.querySelector(d);r&&r.click()}return N(.5+.5*Math.random())}}},500)}async function V(){if(function(){var t=e,n=(o=[],document.querySelectorAll(".challenge-example .image .image"));if(0<n.length)for(let e=0;e<n.length;e++){var r=z(n[e].style.background);if(0==r)return 1;o[e]=r}if(t.length!=o.length)return 1;for(let e=0;e<o.length;e++)if(t[e]!=o[e])return 1}()){if(0==(e=o).length)return-1;var r=e;a=[];for(let e=0;e<r.length;e++)J(r[e]).then(function(t){const n=new Set;for(let e=0;e<t.length;e++)n.add(t[e].class);n.forEach(e=>{a.push(e)}),e==r.length-1&&(c=!0)});for(;!c;)await async function(t){return new Promise(e=>setTimeout(e,t))}(1e3);c=!1}return async function(t){const n=new Map;for(let e=0;e<t.length;e++)n.has(t[e])?n.set(t[e],n.get(t[e])+1):n.set(t[e],1);let r=0,o=-1;return await n.forEach((e,t)=>{r<e&&t.equals_one_in(P)&&(o=t,r=e)}),o}(a)}async function O(){if(9!=document.querySelectorAll(f).length||document.querySelector(j).getAttribute(M))return H();i=Date.now()/1e3,l=0;let t=-1,n=!1,r=!1;try{if(-1==(t=await async function(){let e=-1;try{(e=(e=document.querySelector(U).innerText)&&(e.includes(y)||e.includes(w))?(e=e.replace(y,"")).replace(w,""):e).equals_one_in(P)||(e=await V())}catch(e){}return e}())&&D>=E)return;if(-1==t&&D<E){D++;const a=document.querySelector(d);return a&&a.click(),N(1.5)}task=(e=t,[v,_].includes(e)?{word:["bus","motorbus"],is_scene_task:!1,is_mn_task:!1}:[p].includes(e)?{word:["=car","coupe","jeep","limo","sport utility vehicle","station wagon","hatchback","bumper car","modelT","electric battery","cruiser"],is_scene_task:!1,is_mn_task:!1}:[g].includes(e)?{word:["airplane","plane","aircraft","aeroplane","hangar","Airdock","JumboJet","jetliner","stealth fighter","field artillery"],is_scene_task:!1,is_mn_task:!1}:[C].includes(e)?{word:["train","rail","cable car","locomotive","subway station"],is_scene_task:!1,is_mn_task:!1}:[k,I].includes(e)?{word:["=boat","=barge","houseboat","boathouse","speedboat","=submarine","bobsled","catamaran","schooner","ocean liner","lifeboat","fireboat","yawl","pontoon","small boat","SnowBlower","Sea-coast","paddlewheel","paddle wheel","PaddleSteamer","Freighter","Sternwheeler","kayak","canoe","deck","DockingFacility","surfboard","=ship","=cruise","watercraft","sail","canvas","=raft"],is_scene_task:!1,is_mn_task:!0}:[b].includes(e)?{word:["bicycle","tricycle","mountain bike","AcceleratorPedal","macaw","knot"],is_scene_task:!1,is_mn_task:!1}:[A].includes(e)?{word:["moped","motor scooter","scooter","motorcycle","windshield","dashboard"],is_scene_task:!1,is_mn_task:!0}:[L].includes(e)?{word:["truck","cargocontainer","bazooka"],is_scene_task:!1,is_mn_task:!1}:[x,q,S].includes(e)?{word:["stretcher","printer","nail","mousetrap","TRIMARAN","space shuttle","ski","rotisserie","geyser","plate rack"],is_scene_task:!1,is_mn_task:!0}:[$,F].includes(e)?{word:["alp","volcano"],is_scene_task:!0,is_mn_task:!1}:{word:e,is_scene_task:!1,is_mn_task:!1}),t=task.word,n=task.is_mn_task,r=task.is_scene_task}catch(e){return N(1.5)}var e;let o=[];try{if(9!=(o=function(){const t=[];var n=document.querySelectorAll(f);if(0<n.length)for(let e=0;e<9;e++){var r=z(n[e].style.background);if(0==r)return t;t[e]=r}return t}()).length)return N(1.5)}catch(e){return N(1.5)}if(-1!=t)for(let e=0;e<9;e++)r?function(c,s){Jimp.read(c).then(function(e){e.getBase64(Jimp.AUTO,async function(e,t){var n=document.createElement("img"),r=(n.setAttribute("src",t),await n.decode(),n.height),o=n.width,a=r-.03*r,t=t.replace(/^data:image\/\w+;base64,/,""),t=new Buffer(t,"base64");Jimp.read(t).then(function(e){e.crop(0,a,o,r).getBase64(Jimp.AUTO,async function(e,t){var n=document.createElement("img"),t=(n.src=t,await n.decode(),document.createElement("canvas")),r=(t.width=n.width,t.height=n.height,t.getContext("2d"));r.drawImage(n,0,0);var o=r.getImageData(0,0,t.width,t.height).data,a=0;for(let e=0;e<o.length;e+=4)(o[e]<140&&o[e+1]<110&&80<o[e+2]&&255==o[e+3]||o[e]<200&&o[e+1]<200&&140<o[e+2]&&255==o[e+3])&&a++;a>o.length/4*.001&&a<o.length/8&&document.querySelectorAll(f)[s]&&document.querySelectorAll(f)[s].style.background.includes(c)&&0==document.querySelectorAll(m)[s].style.opacity&&document.querySelectorAll(h)[s].click(),n.removeAttribute("src"),l+=1})}),n.removeAttribute("src")})})}(o[e],(t,e)):(n?async function(e,n,r){const o=await R(e);for(let t=0;t<o.length;t++){const a=document.querySelectorAll(f);if(a[r]&&a[r].style.background.includes(e)&&0==document.querySelectorAll(m)[r].style.opacity&&o[t].className.includes_one_in(n)){let e=.077;if(T.hasOwnProperty(o[t].className)&&(e=T[o[t].className]),!(o[t].probability<=e)){document.querySelectorAll(h)[r].click();break}}}l++}:async function(t,n,r){const o=await J(t);for(let e=0;e<o.length;e++){const a=document.querySelectorAll(f);if(a[r]&&a[r].style.background.includes(t)&&0==document.querySelectorAll(m)[r].style.opacity&&o[e].class.includes_one_in(n)){document.querySelectorAll(h)[r].click();break}}l++})(o[e],t,e);{const c=Date.now()/1e3,s=setInterval(function(){if(30<=Date.now()/1e3-c)return clearInterval(s),O();if(!(Date.now()/1e3-i<=4)&&9==l){clearInterval(s);const e=document.querySelector(d);return e&&e.click(),N(1.5)}},500);return}}String.prototype.includes_one_in=function(t){if(!Array.isArray(t))return this.toLowerCase().includes(t.toLowerCase());for(let e=0;e<t.length;e++)if("="==t[e].substr(0,1)&&this.toLowerCase()==t[e].substr(1).toLowerCase()||this.toLowerCase().includes(t[e].toLowerCase()))return!0;return!1},String.prototype.equals_one_in=function(t){if(!Array.isArray(t))return this.toLowerCase()==t.toLowerCase();for(let e=0;e<t.length;e++)if("="==t[e].substr(0,1)&&this.toLowerCase()==t[e].substr(1).toLowerCase()||this.toLowerCase()==t[e].toLowerCase())return!0;return!1}}setInterval(async()=>{t||await new Promise(t=>{chrome.storage.sync.get(["state"],e=>{t(e.state)})})&&await e()},1e3)})();